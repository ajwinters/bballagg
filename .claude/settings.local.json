{
  "permissions": {
    "allow": [
      "Bash(powershell -c \"[console]::beep\\(800,200\\); [console]::beep\\(1000,300\\)\")",
      "Bash(.venv/Scripts/python.exe:*)",
      "Bash(python -c \"\nimport psycopg2\n\nconn = psycopg2.connect\\(\n    host=''nba-rds-instance.c9wwc0ukkiu5.us-east-1.rds.amazonaws.com'',\n    database=''thebigone'',\n    user=''ajwin'',\n    password=''CharlesBark!23'',\n    port=5432,\n    sslmode=''require''\n\\)\n\ncursor = conn.cursor\\(\\)\n\n# Get all tables\ncursor.execute\\(\"\"\"\"\"\"\n    SELECT tablename FROM pg_tables \n    WHERE schemaname = ''public''\n    ORDER BY tablename\n\"\"\"\"\"\"\\)\n\ntables = [row[0] for row in cursor.fetchall\\(\\)]\n\n# Identify master tables \\(keep these\\)\nmaster_tables = [t for t in tables if t.startswith\\(''master_''\\)]\n\n# Identify non-master tables \\(delete these\\)\nnon_master_tables = [t for t in tables if not t.startswith\\(''master_''\\)]\n\nprint\\(f''Total tables: {len\\(tables\\)}''\\)\nprint\\(f''Master tables to KEEP \\({len\\(master_tables\\)}\\):''\\)\nfor t in master_tables:\n    cursor.execute\\(f''SELECT COUNT\\(*\\) FROM {t}''\\)\n    count = cursor.fetchone\\(\\)[0]\n    print\\(f''  - {t}: {count:,} rows''\\)\n\nprint\\(f''\\\\nNon-master tables to DELETE \\({len\\(non_master_tables\\)}\\):''\\)\nfor t in non_master_tables[:20]:\n    print\\(f''  - {t}''\\)\nif len\\(non_master_tables\\) > 20:\n    print\\(f''  ... and {len\\(non_master_tables\\) - 20} more''\\)\n\nconn.close\\(\\)\n\")",
      "Bash(python -c \"\nimport psycopg2\n\nconn = psycopg2.connect\\(\n    host=''nba-rds-instance.c9wwc0ukkiu5.us-east-1.rds.amazonaws.com'',\n    database=''thebigone'',\n    user=''ajwin'',\n    password=''CharlesBark!23'',\n    port=5432,\n    sslmode=''require''\n\\)\n\ncursor = conn.cursor\\(\\)\n\n# Get all non-master tables\ncursor.execute\\(\"\"\"\"\"\"\n    SELECT tablename FROM pg_tables \n    WHERE schemaname = ''public''\n    AND tablename NOT LIKE ''master_%''\n    ORDER BY tablename\n\"\"\"\"\"\"\\)\n\nnon_master_tables = [row[0] for row in cursor.fetchall\\(\\)]\n\nprint\\(f''Dropping {len\\(non_master_tables\\)} non-master tables...''\\)\n\ndropped_count = 0\nfor table in non_master_tables:\n    try:\n        cursor.execute\\(f''DROP TABLE IF EXISTS \"\"{table}\"\" CASCADE''\\)\n        dropped_count += 1\n        if dropped_count % 20 == 0:\n            print\\(f''  Dropped {dropped_count} tables...''\\)\n    except Exception as e:\n        print\\(f''  Error dropping {table}: {e}''\\)\n\nconn.commit\\(\\)\n\nprint\\(f''\\\\nSuccessfully dropped {dropped_count} tables''\\)\n\n# Verify only master tables remain\ncursor.execute\\(\"\"\"\"\"\"\n    SELECT tablename FROM pg_tables \n    WHERE schemaname = ''public''\n    ORDER BY tablename\n\"\"\"\"\"\"\\)\n\nremaining = [row[0] for row in cursor.fetchall\\(\\)]\nprint\\(f''\\\\nRemaining tables \\({len\\(remaining\\)}\\):''\\)\nfor t in remaining:\n    cursor.execute\\(f''SELECT COUNT\\(*\\) FROM {t}''\\)\n    count = cursor.fetchone\\(\\)[0]\n    print\\(f''  - {t}: {count:,} rows''\\)\n\nconn.close\\(\\)\n\")"
    ]
  },
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "powershell -c \"[console]::beep(600,150); [console]::beep(800,150); [console]::beep(1000,300)\""
          }
        ]
      }
    ]
  }
}
